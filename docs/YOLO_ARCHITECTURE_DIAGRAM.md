# YOLO Integration Architecture

## Complete Pipeline Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         VIDEO INPUT                                  â”‚
â”‚                         (video.mp4)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  STAGE 1: SCENE DETECTION                            â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  PySceneDetect   â”‚              â”‚   YOLO Detector  â”‚ â—„â”€â”€ NEW!   â”‚
â”‚  â”‚  (Traditional)   â”‚     OR       â”‚  (Semantic)      â”‚            â”‚
â”‚  â”‚                  â”‚              â”‚                  â”‚            â”‚
â”‚  â”‚  â€¢ Content-based â”‚              â”‚  â€¢ Object-based  â”‚            â”‚
â”‚  â”‚  â€¢ Slower        â”‚              â”‚  â€¢ 3-5x faster   â”‚            â”‚
â”‚  â”‚  â€¢ Visual diffs  â”‚              â”‚  â€¢ Understands   â”‚            â”‚
â”‚  â”‚                  â”‚              â”‚    context       â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚           â”‚                                 â”‚                        â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                         â–¼                                            â”‚
â”‚              Scene Boundaries (timestamps)                           â”‚
â”‚              [(0.0, 5.2), (5.2, 12.8), ...]                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  STAGE 2: CLIP EXTRACTION                            â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        FFmpeg                                 â”‚  â”‚
â”‚  â”‚  Extracts video clips for each scene boundary                â”‚  â”‚
â”‚  â”‚  Output: scene_0001.mp4, scene_0002.mp4, ...                â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              STAGE 3: THUMBNAIL EXTRACTION                           â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚  Simple Extract  â”‚              â”‚  YOLO Selection  â”‚ â—„â”€â”€ NEW!   â”‚
â”‚  â”‚  (Middle frame)  â”‚     OR       â”‚  (Smart pick)    â”‚            â”‚
â”‚  â”‚                  â”‚              â”‚                  â”‚            â”‚
â”‚  â”‚  â€¢ Fast          â”‚              â”‚  â€¢ Scores frames â”‚            â”‚
â”‚  â”‚  â€¢ May miss      â”‚              â”‚  â€¢ Picks best    â”‚            â”‚
â”‚  â”‚    action        â”‚              â”‚  â€¢ Detects       â”‚            â”‚
â”‚  â”‚                  â”‚              â”‚    objects       â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚           â”‚                                 â”‚                        â”‚
â”‚           â”‚                                 â–¼                        â”‚
â”‚           â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚           â”‚                    â”‚   YOLO Detections      â”‚ â—„â”€â”€ NEW!  â”‚
â”‚           â”‚                    â”‚   â€¢ Objects found      â”‚           â”‚
â”‚           â”‚                    â”‚   â€¢ Confidence scores  â”‚           â”‚
â”‚           â”‚                    â”‚   â€¢ Bounding boxes     â”‚           â”‚
â”‚           â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚           â”‚                                 â”‚                        â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                         â–¼                                            â”‚
â”‚         Thumbnails + Optional YOLO Context                           â”‚
â”‚         scene_0001.jpg + {objects: [person, car]}                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  STAGE 4: GEMINI ANALYSIS                            â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    Gemini 2.5 Flash                           â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Input: Video clip OR Thumbnail                              â”‚  â”‚
â”‚  â”‚  Context: YOLO detections (if available) â—„â”€â”€ ENHANCED!       â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Prompt: "Analyze this scene. YOLO detected: person, car..." â”‚  â”‚
â”‚  â”‚                                                               â”‚  â”‚
â”‚  â”‚  Output: Rich scene metadata                                 â”‚  â”‚
â”‚  â”‚  â€¢ Scene type (action, dialogue, etc.)                       â”‚  â”‚
â”‚  â”‚  â€¢ Description                                                â”‚  â”‚
â”‚  â”‚  â€¢ Characters, setting, mood                                 â”‚  â”‚
â”‚  â”‚  â€¢ Camera work, lighting                                     â”‚  â”‚
â”‚  â”‚  â€¢ Objects, colors, actions                                  â”‚  â”‚
â”‚  â”‚  â€¢ 15-20 searchable tags                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  STAGE 5: VECTOR INDEXING                            â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      ChromaDB                                 â”‚  â”‚
â”‚  â”‚  â€¢ Embeds scene descriptions                                 â”‚  â”‚
â”‚  â”‚  â€¢ Stores metadata                                            â”‚  â”‚
â”‚  â”‚  â€¢ Enables semantic search                                    â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SEARCHABLE DATABASE                               â”‚
â”‚                                                                       â”‚
â”‚  Query: "person walking past a car"                                 â”‚
â”‚  Results: Ranked scenes with clips and metadata                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## YOLO Scene Detection Detail

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    YOLO SCENE DETECTION                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Video Frames:  [F1] [F2] [F3] [F4] [F5] [F6] [F7] [F8] ...
                 â”‚    â”‚    â”‚    â”‚    â”‚    â”‚    â”‚    â”‚
                 â–¼    â–¼    â–¼    â–¼    â–¼    â–¼    â–¼    â–¼
Sample Rate:    [F1] â”€â”€â”€â”€ [F3] â”€â”€â”€â”€ [F5] â”€â”€â”€â”€ [F7] ...
                 â”‚         â”‚         â”‚         â”‚
                 â–¼         â–¼         â–¼         â–¼
YOLO Detect:   [ğŸ‘¤ğŸš—]   [ğŸ‘¤ğŸš—]   [ğŸ‘¤ğŸŒ³]   [ğŸ ğŸŒ³]
                 â”‚         â”‚         â”‚         â”‚
                 â–¼         â–¼         â–¼         â–¼
Signature:    Sig1      Sig2      Sig3      Sig4
              {person,  {person,  {person,  {house,
               car}      car}      tree}     tree}
                 â”‚         â”‚         â”‚         â”‚
                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”´â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                      â–¼         â–¼         â–¼
Compare:         Sim=0.95  Sim=0.45  Sim=0.30
                      â”‚         â”‚         â”‚
                      â”‚         â–¼         â–¼
Scene Cut:           NO       YES       YES
                              â”‚         â”‚
                              â–¼         â–¼
Boundaries:              Scene 1   Scene 2   Scene 3
                         [F1-F4]   [F5-F6]   [F7-...]
```

## YOLO Frame Selection Detail

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    YOLO FRAME SELECTION                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Scene Clip: [10.0s â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 15.0s]
                â”‚                              â”‚
                â–¼                              â–¼
Sample Points:  10.5s    11.5s    12.5s    13.5s    14.5s
                 â”‚        â”‚        â”‚        â”‚        â”‚
                 â–¼        â–¼        â–¼        â–¼        â–¼
Extract:      Frame1   Frame2   Frame3   Frame4   Frame5
                 â”‚        â”‚        â”‚        â”‚        â”‚
                 â–¼        â–¼        â–¼        â–¼        â–¼
YOLO Detect:  [ğŸ‘¤]     [ğŸ‘¤ğŸš—]   [ğŸ‘¤ğŸš—ğŸŒ³] [ğŸ‘¤ğŸš—]   [ğŸ‘¤]
                 â”‚        â”‚        â”‚        â”‚        â”‚
                 â–¼        â–¼        â–¼        â–¼        â–¼
Score:         3.2      6.5      8.9      6.3      3.1
                                  â”‚
                                  â–¼
                            BEST FRAME!
                            (Frame3 @ 12.5s)
                                  â”‚
                                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Selected Frame         â”‚
                    â”‚  + YOLO Context:        â”‚
                    â”‚    â€¢ person (0.92)      â”‚
                    â”‚    â€¢ car (0.85)         â”‚
                    â”‚    â€¢ tree (0.78)        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                                  â–¼
                          To Gemini Analysis
```

## Semantic Signature Comparison

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SEMANTIC SIGNATURE SIMILARITY                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frame 1:                          Frame 2:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Classes: {ğŸ‘¤, ğŸš—}   â”‚          â”‚ Classes: {ğŸ‘¤, ğŸŒ³}   â”‚
â”‚ Counts: {ğŸ‘¤:2, ğŸš—:1}â”‚          â”‚ Counts: {ğŸ‘¤:1, ğŸŒ³:2}â”‚
â”‚ Spatial: [0,0.5,0.5]â”‚          â”‚ Spatial: [0.3,0.7,0]â”‚
â”‚ Total: 3 objects    â”‚          â”‚ Total: 3 objects    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
              Calculate Similarity
                        â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â–¼              â–¼              â–¼
    Class Overlap  Spatial Sim   Count Sim
    (Jaccard)      (Cosine)      (Normalized)
         â”‚              â”‚              â”‚
    {ğŸ‘¤} âˆ© {ğŸ‘¤}    cos(S1,S2)    |3-3|/3
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   = 0.65        = 0.0
    {ğŸ‘¤,ğŸš—,ğŸŒ³}                    = 1.0
    = 1/3 = 0.33
         â”‚              â”‚              â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â–¼
         Weighted: 0.5Ã—0.33 + 0.3Ã—0.65 + 0.2Ã—1.0
                 = 0.165 + 0.195 + 0.2
                 = 0.56 (Similar)
                        â”‚
                        â–¼
              If < threshold (0.4):
                 SCENE CHANGE!
              Else:
                 Same scene
```

## Data Flow with YOLO Context

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATA FLOW WITH YOLO                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Clip Metadata:
{
  "clip_index": 0,
  "clip_path": "scene_0001.mp4",
  "start_time": 0.0,
  "end_time": 5.2,
  "duration": 5.2,
  "thumbnail_path": "scene_0001.jpg",
  "yolo_context": {                    â—„â”€â”€ NEW!
    "objects_detected": ["person", "car", "tree"],
    "num_objects": 3,
    "confidence_avg": 0.87
  }
}
         â”‚
         â–¼
Gemini Prompt:
"Analyze this video clip for a film search engine.

YOLO Pre-Analysis Context:                â—„â”€â”€ NEW!
Detected objects: person, car, tree (3 total objects)

Use this context to enhance your analysis..."
         â”‚
         â–¼
Gemini Response:
{
  "scene_type": "establishing",
  "description": "A person walks past a parked car near trees...",
  "objects": ["person", "car", "tree", "sidewalk"],  â—„â”€â”€ Enhanced!
  "tags": ["person", "walking", "car", "parked", "trees", ...]
}
         â”‚
         â–¼
Analysis Result:
{
  "status": "success",
  "clip_path": "scene_0001.mp4",
  "analysis": {...},
  "yolo_enhanced": true,               â—„â”€â”€ NEW!
  "clip_info": {...}
}
```

## Performance Comparison

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  PERFORMANCE COMPARISON                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Test Video: 2-minute 1080p clip

PySceneDetect Only:
â”œâ”€ Scene Detection: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 40s
â”œâ”€ Clip Extraction: â–ˆâ–ˆâ–ˆâ–ˆ 3s
â”œâ”€ Thumbnails:      â–ˆâ–ˆ 2s
â””â”€ Total:           â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 45s

YOLO Pipeline (CPU):
â”œâ”€ Scene Detection: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 12s  (3.3x faster!)
â”œâ”€ Clip Extraction: â–ˆâ–ˆâ–ˆâ–ˆ 3s
â”œâ”€ Thumbnails:      â–ˆâ–ˆâ–ˆâ–ˆ 4s  (smart selection)
â””â”€ Total:           â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 19s  (2.4x faster!)

YOLO Pipeline (GPU):
â”œâ”€ Scene Detection: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 6s  (6.7x faster!)
â”œâ”€ Clip Extraction: â–ˆâ–ˆâ–ˆâ–ˆ 3s
â”œâ”€ Thumbnails:      â–ˆâ–ˆ 2s  (GPU accelerated)
â””â”€ Total:           â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 11s  (4.1x faster!)

Memory Usage:
â”œâ”€ PySceneDetect:   â–ˆâ–ˆâ–ˆâ–ˆ 500MB
â”œâ”€ YOLO (CPU):      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 800MB
â””â”€ YOLO (GPU):      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 1.5GB GPU + 500MB RAM
```

## Component Interaction

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  COMPONENT INTERACTION                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

TakeOnePipeline
    â”‚
    â”œâ”€â–º SceneDetector
    â”‚   â”œâ”€â–º detect_scenes_yolo()        â—„â”€â”€ NEW!
    â”‚   â”‚   â””â”€â–º YOLO model
    â”‚   â””â”€â–º detect_scenes()             (fallback)
    â”‚       â””â”€â–º PySceneDetect
    â”‚
    â”œâ”€â–º VideoClipper
    â”‚   â”œâ”€â–º extract_all_clips()
    â”‚   â”‚   â””â”€â–º FFmpeg
    â”‚   â””â”€â–º extract_thumbnails_batch()
    â”‚       â””â”€â–º FrameSelector           â—„â”€â”€ ENHANCED!
    â”‚           â””â”€â–º YOLO model
    â”‚
    â”œâ”€â–º GeminiAnalyzer                  â—„â”€â”€ ENHANCED!
    â”‚   â”œâ”€â–º analyze_clips_batch()
    â”‚   â”‚   â””â”€â–º analyze_clip()
    â”‚   â”‚       â”œâ”€â–º Uses YOLO context   â—„â”€â”€ NEW!
    â”‚   â”‚       â””â”€â–º Gemini API
    â”‚   â””â”€â–º Prompts:
    â”‚       â”œâ”€â–º DEFAULT_PROMPT
    â”‚       â””â”€â–º DEFAULT_PROMPT_WITH_YOLO â—„â”€â”€ NEW!
    â”‚
    â””â”€â–º SceneSearchEngine
        â””â”€â–º ChromaDB
```

## Legend

```
â—„â”€â”€ NEW!      : New feature added
â—„â”€â”€ ENHANCED! : Existing feature improved
[ğŸ‘¤]          : Person detected
[ğŸš—]          : Car detected
[ğŸŒ³]          : Tree detected
[ğŸ ]          : House detected
```
